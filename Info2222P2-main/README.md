# Task Management Application

A modern task management web application with Kanban board, calendar, and task management features.

## Getting Started

Follow these simple steps to run the application locally.

### Prerequisites

- [Node.js](https://nodejs.org/) (v16 or newer)
- [pnpm](https://pnpm.io/) (fast, disk space efficient package manager)

### Installation

1. Clone the repository
   ```bash
   git clone [repository-url]
   cd [repository-directory]
   ```

2. Install dependencies
   ```bash
   pnpm install
   ```

3. Build dependencies
   ```bash
   pnpm build
   ```

4. Start the development server
   ```bash
   pnpm dev
   ```

5. Open your browser and navigate to:
   ```
   http://localhost:3000
   ```

### Running Securely with HTTPS

For local HTTPS development (required for certain features and security testing):

1. Install mkcert (one-time setup)
   ```bash
   # macOS (using Homebrew)
   brew install mkcert

   # Create a locally-trusted certificate authority
   mkcert -install
   ```

2. Run the secure development server
   ```bash
   # Option 1: Use the provided script (recommended)
   chmod +x start-secure.sh
   ./start-secure.sh

   # Option 2: Run manually
   pnpm dev:secure
   ```

3. Open your browser and navigate to:
   ```
   https://localhost:3001
   ```

   Visit `/secure` path to see a demo page confirming your secure connection.

This setup uses locally-trusted certificates generated by mkcert, eliminating browser security warnings while providing proper HTTPS encryption for local development.

## Features

- **Kanban Board**: Drag and drop task management with columns for Backlog, To Do, In Progress, and Done
- **Calendar View**: Schedule and manage tasks in daily, weekly, and monthly views
- **Task Management**: Create, edit, delete, and share tasks with customizable priorities
- **Responsive Design**: Works on desktop, tablet, and mobile devices
- **Secure Development**: Support for local HTTPS development with trusted certificates

## Usage Tips

- **Adding Tasks**: Click the "+" button in any Kanban column or calendar date
- **Moving Tasks**: Drag and drop tasks between columns in the Kanban board
- **Calendar Navigation**: Use the arrows to move between months, weeks, or days
- **Task Details**: Click on any task to view details or edit information

## Troubleshooting

If you encounter any issues:

1. Make sure all dependencies are installed correctly
2. Check that you're using a compatible Node.js version
3. Clear your browser cache and restart the development server
4. If problems persist, check the browser console for error messages

### HTTPS Setup Issues

- **Certificate errors**: Ensure you've run `mkcert -install` to set up the local certificate authority
- **Firefox users**: May need to install `nss` (`brew install nss` on macOS) and re-run `mkcert -install`
- **Certificate not found**: Run the `start-secure.sh` script which will generate certificates if missing

## Security Enhancements

The application has been hardened with several security features to protect against common web vulnerabilities:

### Authentication & Authorization
- Secure JWT token management with automatic key rotation and fallback mechanisms
- Protection against brute force attacks through rate limiting
- Session fixation prevention by regenerating session IDs after privilege changes
- Enhanced password reset functionality with entropy and IP binding

### Data Protection
- True end-to-end encryption (E2EE) for messages with client-side encryption
- Secure key exchange mechanisms for sharing group encryption keys
- Input sanitization to prevent XSS and injection attacks
- Enhanced password handling with secure transmission and storage

### API Security
- CSRF protection for all state-changing operations
- Rate limiting to prevent abuse and DoS attacks
- Standardized error responses to prevent information leakage
- Input validation using Zod schemas

### Monitoring & Audit
- Comprehensive security audit logging system
- Suspicious activity detection based on login patterns
- Security report generation for administrators
- Configurable log retention with database and file fallback options

### Client-Side Security
- Certificate verification for TLS connections
- Protection against timing attacks
- Clear separation between server-encrypted and client-encrypted content
- Key storage in session storage with expiration

## Security Configuration

Before deployment, ensure the following environment variables are set:

```
# JWT Settings
JWT_SECRET=<strong-random-secret>
JWT_ROTATION_INTERVAL=7d
JWT_TOKEN_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# Rate Limiting
REDIS_URL=<redis-connection-string> # Optional, falls back to memory store

# Security Logging
SECURITY_LOG_DIR=/path/to/logs # Optional, defaults to OS temp directory
```

## Security Best Practices for Development

1. **Never store secrets in the code repository**
   - Use environment variables for all secrets and credentials
   - Consider using a secrets manager for production environments

2. **Always validate user input**
   - Use the provided sanitization utilities in `lib/security/sanitization.ts`
   - Validate all API inputs with Zod schemas

3. **Follow the principle of least privilege**
   - Use the withAuthAndCsrf middleware for protected routes
   - Check user permissions before allowing sensitive operations

4. **Implement proper error handling**
   - Use the standardized error responses to avoid leaking information
   - Log security events appropriately using the audit system

5. **Regularly rotate keys and credentials**
   - The JWT system automatically rotates keys
   - Consider implementing rotation for other credentials

6. **Test security features**
   - Use tools like OWASP ZAP to test for vulnerabilities
   - Regularly perform security reviews of the codebase

## License

[MIT License](LICENSE)
